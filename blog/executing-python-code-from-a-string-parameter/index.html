<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Executing Python Code From a String Parameter | James Robinson 🌊</title><meta name=keywords content="tips,ui,python"><meta name=description content="Create a preset on a Null that lets you run Python code from it"><meta name=author content><link rel=canonical href=https://www.jamesrobinsonvfx.com/blog/executing-python-code-from-a-string-parameter/><link crossorigin=anonymous href=/assets/css/stylesheet.c18f0e70982d46e72f09a1b9c081ddb26b145e34778ccbb832592b0ab8dcbd67.css integrity="sha256-wY8OcJgtRucvCaG5wIHdsmsUXjR3jMu4MlkrCrjcvWc=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://www.jamesrobinsonvfx.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.jamesrobinsonvfx.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.jamesrobinsonvfx.com/favicon-32x32.png><link rel=apple-touch-icon href=https://www.jamesrobinsonvfx.com/apple-touch-icon.png><link rel=mask-icon href=https://www.jamesrobinsonvfx.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><link rel=icon href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🌊</text></svg>"><meta property="og:title" content="Executing Python Code From a String Parameter"><meta property="og:description" content="Create a preset on a Null that lets you run Python code from it"><meta property="og:type" content="article"><meta property="og:url" content="https://www.jamesrobinsonvfx.com/blog/executing-python-code-from-a-string-parameter/"><meta property="og:image" content="https://www.jamesrobinsonvfx.com/blog/executing-python-code-from-a-string-parameter/images/preview.png"><meta property="article:section" content="blog"><meta property="article:published_time" content="2022-02-18T00:00:00+00:00"><meta property="article:modified_time" content="2022-02-18T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.jamesrobinsonvfx.com/blog/executing-python-code-from-a-string-parameter/images/preview.png"><meta name=twitter:title content="Executing Python Code From a String Parameter"><meta name=twitter:description content="Create a preset on a Null that lets you run Python code from it"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Blog 🪶","item":"https://www.jamesrobinsonvfx.com/blog/"},{"@type":"ListItem","position":3,"name":"Executing Python Code From a String Parameter","item":"https://www.jamesrobinsonvfx.com/blog/executing-python-code-from-a-string-parameter/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Executing Python Code From a String Parameter","name":"Executing Python Code From a String Parameter","description":"Create a preset on a Null that lets you run Python code from it","keywords":["tips","ui","python"],"articleBody":" Hipfile: jamesr_executingpythonfromstring.hiplc\nOverview Sometimes you just want to run some python code, but don’t want to run line-by-line in the Python Shell, can’t be bothered to create a shelf tool, and don’t need to run over geometry (so the Python SOP is out). Luckily, it’s really easy create a simple preset that lets us run some Python code from a string parameter on any node.\nThis is useful for creating small scripts to run in your scene, debug stuff, prototype some code, and even for creating code for parameter callbacks on the fly without needing to write your code to disk, or embed into an HDA.\nThis method uses Python’s exec function, and can be used to run any arbitrary string as code. Use with caution…\nSetup Start off by creating a Null Object. This is where we’ll add our parameters.\nNull SOP\nMake all the current parms invisible by selecting them, and toggling the Invisible checkbox. We don’t need to see them.\nHide existing parameters\nAdd our own parameters and give them nice names and labels. We only need two:\nLabel: Execute Name: execute Type: Button Label: Code Name: code Type: String Hide existing parameters\nCurrently, the interface is pretty basic and not something that would be very comfortable writing code in!\nBasic parameters\nWe can make the string parameter a bit roomier by modifying its Parameter Template here:\nModify string parameter\nEnable Multi-line String Set the Language to Python Setting the language to Python doesn’t really do anything special, aside from giving us some nice syntax hints and highlighting in the string input area.\nPython string parameter\nNice, looking a lot better! Now we just need to hook it all up so that when we press the button, the code executes. We do this by adding a Callback to the button we created.\nThe callback code for this one is simple:\nexec(kwargs[\"node\"].parm(\"code\").evalAsString()) Add callback\nMake sure to set the callback language to Python if it isn’t set already! You can tell by the icon to the right of the Callback Script parameter.\nAnd that’s it! Pressing the Execute button works just as a expected and prints our message to the shell.\nShell output\nTo finish it off, we can store this as a preset so that it’s super quick to set up when we need it:\nSave preset\nSave preset dialog\nA Quick Detour: kwargs Now kwargs is a whole topic in itself (see the documentation)! Basically, whenever you’re running code on a node in Houdini, whether through a callback, an Action Button, a menu script, an OnCreated script … and so on, Houdini usually passes you a really useful object called kwargs. kwargs generally stands for Keyword Arguments, and is a simple Python dictionary with some key/value pairs that can be really useful to you. I don’t want to make this a post about kwargs, but just so we can understand it a little better, let’s quickly erase the callback code that’s currently in there, and replace it with:\nprint(kwargs) Checking the python shell, we can see that kwargs gives us access to the following info:\n{'node': \u003chou.ObjNode of type null at /obj/null1\u003e, 'parm': \u003chou.Parm execute in /obj/null1\u003e, 'script_multiparm_index': '-1', 'script_value0': '0', 'script_value': '0', 'parm_name': 'execute', 'script_multiparm_nesting': '0', 'script_parm': 'execute'} so when we called kwargs[\"node\"] above, we used the dictionary Houdini gave us for free to find the node that the parameter who was running the callback belongs to. This is generally a lot more reliable than using other methods such as hou.pwd() to find the current node. So use kwargs if it’s available!\nAdvanced: Complex Callbacks on the Fly Now that we know how to run code on a node, and have some idea of what we get from kwargs, it’s possible for us to actually write some more complicated code in a string parameter, and use it to run a callback that does something else.\nThe interesting part about this is that when we execute our code with the snippet above:\nexec(kwargs[\"node\"].parm(\"code\").evalAsString()) the kwargs dictionary is made available to us in our code block!\nkwargs in parm\nIf we look closely, we can see that the 'parm_name' key’s value is 'execute', meaning that the kwargs dictionary was passed through from our button! This means we can write code in our string parameter and run it like a callback just like you can do on HDAs using the PythonModule script section! This can be extremely useful for creating scripts on the fly that run over multiple items in multiparm blocks. I’ll include an example of that in the hipfile.\nAdvanced mode\nHopefully you enjoyed this, and thanks for reading!\n","wordCount":"773","inLanguage":"en","image":"https://www.jamesrobinsonvfx.com/blog/executing-python-code-from-a-string-parameter/images/preview.png","datePublished":"2022-02-18T00:00:00Z","dateModified":"2022-02-18T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.jamesrobinsonvfx.com/blog/executing-python-code-from-a-string-parameter/"},"publisher":{"@type":"Organization","name":"James Robinson 🌊","logo":{"@type":"ImageObject","url":"https://www.jamesrobinsonvfx.com/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.jamesrobinsonvfx.com accesskey=h title="James Robinson 🌊 (Alt + H)">James Robinson 🌊</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.jamesrobinsonvfx.com title="blog 🪶"><span>blog 🪶</span></a></li><li><a href=https://www.jamesrobinsonvfx.com/projects title="projects 🪛"><span>projects 🪛</span></a></li><li><a href=https://www.jamesrobinsonvfx.com/snippets title="snippets 🧰"><span>snippets 🧰</span></a></li><li><a href=https://www.jamesrobinsonvfx.com/links title="links 🔗"><span>links 🔗</span></a></li><li><a href=https://www.jamesrobinsonvfx.com/about title="about 👋"><span>about 👋</span></a></li><li><a href=https://www.jamesrobinsonvfx.com/search/ title="search 🔍"><span>search 🔍</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Executing Python Code From a String Parameter</h1><div class=post-meta><span title='2022-02-18 00:00:00 +0000 UTC'>February 18, 2022</span>&nbsp;·&nbsp;4 min</div></header><figure class=entry-cover><a href=https://www.jamesrobinsonvfx.com/blog/executing-python-code-from-a-string-parameter/images/preview.png target=_blank rel="noopener noreferrer"><img loading=lazy srcset="https://www.jamesrobinsonvfx.com/blog/executing-python-code-from-a-string-parameter/images/preview_huce815479f57ad6eb7a04a44466d38fa7_44891_360x0_resize_box_3.png 360w ,https://www.jamesrobinsonvfx.com/blog/executing-python-code-from-a-string-parameter/images/preview_huce815479f57ad6eb7a04a44466d38fa7_44891_480x0_resize_box_3.png 480w ,https://www.jamesrobinsonvfx.com/blog/executing-python-code-from-a-string-parameter/images/preview_huce815479f57ad6eb7a04a44466d38fa7_44891_720x0_resize_box_3.png 720w ,https://www.jamesrobinsonvfx.com/blog/executing-python-code-from-a-string-parameter/images/preview.png 876w" sizes="(min-width: 768px) 720px, 100vw" src=https://www.jamesrobinsonvfx.com/blog/executing-python-code-from-a-string-parameter/images/preview.png alt="Cover Photo" width=876 height=420></a><p>Execute Python code from a string parameter</p></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#overview aria-label=Overview>Overview</a></li><li><a href=#setup aria-label=Setup>Setup</a><ul><ul><li><a href=#a-quick-detour-kwargs aria-label="A Quick Detour: kwargs">A Quick Detour: <code>kwargs</code></a></li><li><a href=#advanced-complex-callbacks-on-the-fly aria-label="Advanced: Complex Callbacks on the Fly">Advanced: Complex Callbacks on the Fly</a></li></ul></ul></li></ul></div></details></div><div class=post-content><blockquote><p>Hipfile: <a href=houdini/hip/jamesr_executingpythonfromstring.hiplc>jamesr_executingpythonfromstring.hiplc</a></p></blockquote><h1 id=overview>Overview<a hidden class=anchor aria-hidden=true href=#overview>🔗</a></h1><p>Sometimes you just want to run some python code, but don&rsquo;t want to run line-by-line in the Python Shell, can&rsquo;t be bothered to create a shelf tool, and don&rsquo;t need to run over geometry (so the Python SOP is out). Luckily, it&rsquo;s really easy create a simple preset that lets us run some Python code from a string parameter on any node.</p><p>This is useful for creating small scripts to run in your scene, debug stuff,
prototype some code, and even for creating code for parameter callbacks on the fly without needing to write your code to disk, or embed into an HDA.</p><blockquote><p>This method uses Python&rsquo;s <code>exec</code> function, and can be used to run any arbitrary string as code. Use with caution&mldr;</p></blockquote><h1 id=setup>Setup<a hidden class=anchor aria-hidden=true href=#setup>🔗</a></h1><p>Start off by creating a Null Object. This is where we&rsquo;ll add our parameters.</p><figure><img loading=lazy src=images/01_null_sop.png alt="Null SOP"><figcaption><p>Null SOP</p></figcaption></figure><p>Make all the current parms invisible by selecting them, and toggling the <strong>Invisible</strong> checkbox. We don&rsquo;t need to see them.</p><figure><img loading=lazy src=images/02_make_invisible.png alt="Hide existing parameters"><figcaption><p>Hide existing parameters</p></figcaption></figure><p>Add our own parameters and give them nice names and labels. We only need two:</p><ul><li><strong>Label</strong>: <em>Execute</em> <strong>Name</strong>: <em>execute</em> <strong>Type</strong>: <em>Button</em></li><li><strong>Label</strong>: <em>Code</em> <strong>Name</strong>: <em>code</em> <strong>Type</strong>: <em>String</em></li></ul><figure><img loading=lazy src=images/03_add_parameters.png alt="Hide existing parameters"><figcaption><p>Hide existing parameters</p></figcaption></figure><p>Currently, the interface is pretty basic and not something that would be very comfortable writing code in!</p><figure><img loading=lazy src=images/04_basic_parms.png alt="Basic parameters"><figcaption><p>Basic parameters</p></figcaption></figure><p>We can make the string parameter a bit roomier by modifying its Parameter Template here:</p><figure><img loading=lazy src=images/05_modify_string_parm.png alt="Modify string parameter"><figcaption><p>Modify string parameter</p></figcaption></figure><ol><li>Enable <em>Multi-line String</em></li><li>Set the Language to <em>Python</em></li></ol><p>Setting the language to Python doesn&rsquo;t really do anything special, aside from giving us some nice syntax hints and highlighting in the string input area.</p><figure><img loading=lazy src=images/06_python_string_parm.png alt="Python string parameter"><figcaption><p>Python string parameter</p></figcaption></figure><p>Nice, looking a lot better! Now we just need to hook it all up so that when we press the button, the code executes. We do this by adding a <em>Callback</em> to the button we created.</p><p>The callback code for this one is simple:</p><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>exec<span style=color:#eceff4>(</span>kwargs<span style=color:#eceff4>[</span><span style=color:#a3be8c>&#34;node&#34;</span><span style=color:#eceff4>]</span><span style=color:#81a1c1>.</span>parm<span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;code&#34;</span><span style=color:#eceff4>)</span><span style=color:#81a1c1>.</span>evalAsString<span style=color:#eceff4>())</span>
</span></span></code></pre></div><figure><img loading=lazy src=images/07_add_callback.png alt="Add callback"><figcaption><p>Add callback</p></figcaption></figure><blockquote><p>Make sure to set the callback language to Python if it isn&rsquo;t set already! You can tell by the icon to the right of the <em>Callback Script</em> parameter.</p></blockquote><p>And that&rsquo;s it! Pressing the <strong>Execute</strong> button works just as a expected and prints our message to the shell.</p><figure><img loading=lazy src=images/08_shell_output.png alt="Shell output"><figcaption><p>Shell output</p></figcaption></figure><p>To finish it off, we can store this as a preset so that it&rsquo;s super quick to set up when we need it:</p><figure><img loading=lazy src=images/11_save_preset.png alt="Save preset"><figcaption><p>Save preset</p></figcaption></figure><figure><img loading=lazy src=images/12_save_preset_dialog.png alt="Save preset dialog"><figcaption><p>Save preset dialog</p></figcaption></figure><h3 id=a-quick-detour-kwargs>A Quick Detour: <code>kwargs</code><a hidden class=anchor aria-hidden=true href=#a-quick-detour-kwargs>🔗</a></h3><p>Now <code>kwargs</code> is a whole topic in itself (see the <a href=https://www.sidefx.com/docs/houdini/hom/locations.html>documentation</a>)! Basically, whenever you&rsquo;re running code on a node in Houdini, whether through a callback, an Action Button, a menu script, an <code>OnCreated</code> script &mldr; and so on, Houdini usually passes you a really useful object called <code>kwargs</code>. <code>kwargs</code> generally stands for <em>Keyword Arguments</em>, and is a simple Python dictionary with some key/value pairs that can be really useful to you. I don&rsquo;t want to make this a post about kwargs, but just so we can understand it a little better, let&rsquo;s quickly erase the callback code that&rsquo;s currently in there, and replace it with:</p><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#81a1c1>print</span><span style=color:#eceff4>(</span>kwargs<span style=color:#eceff4>)</span>
</span></span></code></pre></div><p>Checking the python shell, we can see that <code>kwargs</code> gives us access to the following info:</p><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#eceff4>{</span><span style=color:#a3be8c>&#39;node&#39;</span><span style=color:#eceff4>:</span> <span style=color:#81a1c1>&lt;</span>hou<span style=color:#81a1c1>.</span>ObjNode of <span style=color:#81a1c1>type</span> null at <span style=color:#81a1c1>/</span>obj<span style=color:#81a1c1>/</span>null1<span style=color:#81a1c1>&gt;</span><span style=color:#eceff4>,</span> <span style=color:#a3be8c>&#39;parm&#39;</span><span style=color:#eceff4>:</span> <span style=color:#81a1c1>&lt;</span>hou<span style=color:#81a1c1>.</span>Parm execute <span style=color:#81a1c1;font-weight:700>in</span> <span style=color:#81a1c1>/</span>obj<span style=color:#81a1c1>/</span>null1<span style=color:#81a1c1>&gt;</span><span style=color:#eceff4>,</span> <span style=color:#a3be8c>&#39;script_multiparm_index&#39;</span><span style=color:#eceff4>:</span> <span style=color:#a3be8c>&#39;-1&#39;</span><span style=color:#eceff4>,</span> <span style=color:#a3be8c>&#39;script_value0&#39;</span><span style=color:#eceff4>:</span> <span style=color:#a3be8c>&#39;0&#39;</span><span style=color:#eceff4>,</span> <span style=color:#a3be8c>&#39;script_value&#39;</span><span style=color:#eceff4>:</span> <span style=color:#a3be8c>&#39;0&#39;</span><span style=color:#eceff4>,</span> <span style=color:#a3be8c>&#39;parm_name&#39;</span><span style=color:#eceff4>:</span> <span style=color:#a3be8c>&#39;execute&#39;</span><span style=color:#eceff4>,</span> <span style=color:#a3be8c>&#39;script_multiparm_nesting&#39;</span><span style=color:#eceff4>:</span> <span style=color:#a3be8c>&#39;0&#39;</span><span style=color:#eceff4>,</span> <span style=color:#a3be8c>&#39;script_parm&#39;</span><span style=color:#eceff4>:</span> <span style=color:#a3be8c>&#39;execute&#39;</span><span style=color:#eceff4>}</span>
</span></span></code></pre></div><p>so when we called <code>kwargs["node"]</code> above, we used the dictionary Houdini gave us for free to find the node that the parameter who was running the callback belongs to. This is generally a lot more reliable than using other methods such as <code>hou.pwd()</code> to find the current node. So use <code>kwargs</code> if it&rsquo;s available!</p><h3 id=advanced-complex-callbacks-on-the-fly>Advanced: Complex Callbacks on the Fly<a hidden class=anchor aria-hidden=true href=#advanced-complex-callbacks-on-the-fly>🔗</a></h3><p>Now that we know how to run code on a node, and have some idea of what we get from <code>kwargs</code>, it&rsquo;s possible for us to actually write some more complicated code in a string parameter, and use it to run a callback that does something else.</p><p>The interesting part about this is that when we execute our code with the snippet above:</p><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>exec<span style=color:#eceff4>(</span>kwargs<span style=color:#eceff4>[</span><span style=color:#a3be8c>&#34;node&#34;</span><span style=color:#eceff4>]</span><span style=color:#81a1c1>.</span>parm<span style=color:#eceff4>(</span><span style=color:#a3be8c>&#34;code&#34;</span><span style=color:#eceff4>)</span><span style=color:#81a1c1>.</span>evalAsString<span style=color:#eceff4>())</span>
</span></span></code></pre></div><p>the <code>kwargs</code> dictionary is made available to us in our code block!</p><figure><img loading=lazy src=images/09_kwargs_in_parm.png alt="`kwargs` in parm"><figcaption><p><code>kwargs</code> in parm</p></figcaption></figure><p>If we look closely, we can see that the <code>'parm_name'</code> key&rsquo;s value is <code>'execute'</code>, meaning that the <code>kwargs</code> dictionary was passed through from our button! This means we can write code in our string parameter and run it like a callback just like you can do on HDAs using the PythonModule script section! This can be extremely useful for creating scripts on the fly that run over multiple items in multiparm blocks. I&rsquo;ll include an example of that in the hipfile.</p><figure><img loading=lazy src=images/10_advanced_mode.png alt="Advanced mode"><figcaption><p>Advanced mode</p></figcaption></figure><p>Hopefully you enjoyed this, and thanks for reading!</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.jamesrobinsonvfx.com/tags/tips/>tips</a></li><li><a href=https://www.jamesrobinsonvfx.com/tags/ui/>ui</a></li><li><a href=https://www.jamesrobinsonvfx.com/tags/python/>python</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://www.jamesrobinsonvfx.com>James Robinson 🌊</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script>const images=Array.from(document.querySelectorAll(".post-content img"));images.forEach(e=>{mediumZoom(e,{margin:0,scrollOffset:40,container:null,template:null,background:"rgba(0, 0, 0, 0.8)"})})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>