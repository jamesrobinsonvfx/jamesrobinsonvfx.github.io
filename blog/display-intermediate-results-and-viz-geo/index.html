<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Display Intermediate Results And Visualization Geo in an HDA | James Robinson üåä</title>
<meta name="keywords" content="houdini, ui, python, hda, subnet, tools">
<meta name="description" content="Different methods for switching between visualization geo in an HDA or subnet">
<meta name="author" content="">
<link rel="canonical" href="https://www.jamesrobinsonvfx.com/blog/display-intermediate-results-and-viz-geo/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.31a1ec8ce187fd44934e170601c332903bca9bc902e9bca2c4b7205cf7203d32.css" integrity="sha256-MaHsjOGH/USTThcGAcMykDvKm8kC6byixLcgXPcgPTI=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://www.jamesrobinsonvfx.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.jamesrobinsonvfx.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.jamesrobinsonvfx.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://www.jamesrobinsonvfx.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://www.jamesrobinsonvfx.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üåä</text></svg>">
<meta property="og:title" content="Display Intermediate Results And Visualization Geo in an HDA" />
<meta property="og:description" content="Different methods for switching between visualization geo in an HDA or subnet" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.jamesrobinsonvfx.com/blog/display-intermediate-results-and-viz-geo/" />
<meta property="og:image" content="https://www.jamesrobinsonvfx.com/blog/display-intermediate-results-and-viz-geo/images/preview.png" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2023-02-01T00:00:00+00:00" />
<meta property="article:modified_time" content="2023-02-01T00:00:00+00:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://www.jamesrobinsonvfx.com/blog/display-intermediate-results-and-viz-geo/images/preview.png" />
<meta name="twitter:title" content="Display Intermediate Results And Visualization Geo in an HDA"/>
<meta name="twitter:description" content="Different methods for switching between visualization geo in an HDA or subnet"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Blog ü™∂",
      "item": "https://www.jamesrobinsonvfx.com/blog/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Display Intermediate Results And Visualization Geo in an HDA",
      "item": "https://www.jamesrobinsonvfx.com/blog/display-intermediate-results-and-viz-geo/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Display Intermediate Results And Visualization Geo in an HDA",
  "name": "Display Intermediate Results And Visualization Geo in an HDA",
  "description": "Different methods for switching between visualization geo in an HDA or subnet",
  "keywords": [
    "houdini", "ui", "python", "hda", "subnet", "tools"
  ],
  "articleBody": " Hipfile: jamesr_displayintermediateresultsandvisualizationgeo.hip\nOverview If you‚Äôve ever built an HDA in Houdini, you might have come across the following problem:\nHow can I switch between showing the final result and some visualization geo inside my HDA?\nDisplaying intermediate results or visualizing stuff inside an HDA can be a little tricky in Houdini, mainly since changing the Display Flag in a locked asset isn‚Äôt allowed, and oftentimes the built-in wireframe Guide Geometry option isn‚Äôt enough for the job.\nI‚Äôve run into this online and in my own work, and wanted to share a couple of ways you can easily display intermediate steps or visualization geometry in the viewport without too much fuss!\nWe‚Äôll cover three solutions:\nSimple Switch SOP controlled by an Ordered Menu Additional Output Additional Output + Output for View Flag Callback Feel free to follow along using the hipfile above.\nBefore We Get Started Recap Some Basics Whichever node has the Display Flag set on it is the one that shows up in the viewport. The result of the node that it‚Äôs on is passed through the first/leftmost output (when not using an Output SOP).\nMore info With no Output SOP, the Display and Render flags determine the output of your node.\nWhen using Output SOPs inside a subnet/HDA, the Display Flag is ignored, and the result that‚Äôs piped into the Output SOP (whose index is zero) is what shows up in the viewport.\nMore info Caption\nHDAs/Subnets can have multiple outputs when using the Output SOP.\nMore info Multiple Outputs\nYou can change the Output for View Flag to switch which output is shown in the viewport.\nMore info Output for View Menu\nDisplay Flag can not be moved inside of a locked HDA, even with a Python callback.\nMore info Permission Denied (Interface)\nPermission Denied (Python)\nnode = hou.node(\"/obj/locked_asset/displayflagcallback\") node.node(\"torus\").setDisplayFlag(True) Traceback (most recent call last): File \"\", line 1, in \u003cmodule\u003e File \"/Applications/Houdini/Current/Frameworks/Houdini.framework/Versions/Current/Resources/houdini/python3.9libs/hou.py\", line 79 410, in setDisplayFlag return _hou.SopNode_setDisplayFlag(self, on) hou.PermissionError: Failed to modify node or parameter because of a permission error. Possible causes include locked assets, takes, product permissions or user specified permissions You could get even fancier than this tutorial using Python Viewer States, but we won‚Äôt be covering that here.\nExample Setup To demonstrate, we‚Äôll be creating a super simple Voronoi fracturing HDA. The focus is definitely not on how this tool works, but how we can improve the user experience!\nBasic Example Setup\n‚ÄúIntermediate Steps‚Äù / ‚ÄúVisualization Geometry‚Äù? I‚Äôve mentioned the terms Intermediate Steps and Visualization Geometry twice now, but I should explain a bit more clearly what I mean in terms of the example setup that we‚Äôll use for the rest of the tutorial.\nIntermediate Steps When your HDA wraps up a workflow that does a few things in order (like our example), it can be helpful to be able to see the result of each step. In this example, we‚Äôre building a basic fracturing HDA. For debugging purposes, it could be good to be able to inspect the noised-up volume and the scattered points. Creating these geometries is what I‚Äôm referring to as Intermediate Steps. They contribute to, but are not the final result.\nVisualization Geometry It could also be nice to see an exploded view of all our pieces with different colors assigned to them (for this example‚Ä¶probably not that useful in practice, but let‚Äôs use it here as a demo!). Since this doesn‚Äôt really contribute to the final result at all and is just for debugging/inspection, I call it Visualization Geometry.\nSimple: Switch SOP and an Ordered Menu Parameter First up, we have the simplest method: We‚Äôll use a Switch SOP to switch what our node outputs, and link it to an Ordered Menu Parameter.\nPros Simple to set up Cons Easy to forget and accidentally leave the menu on the wrong selection and output the wrong thing First, let‚Äôs create some Null SOPs to use as ‚Äúanchors‚Äù for each thing we want to switch between. This helps keeps things clean, organized, and flexible.\nAnchor Nulls for each step\nNext we‚Äôll plug all our nulls into the switch in the same order that we want to have their corresponding items in the dropdown menu.\nNulls plugged into switch\nFinal Result (Fractured Pieces) Noised-up Volume Points Exploded / Colorized Pieces Another common technique is to create an Object Merge for each Null and put the switch off to the side to reduce clutter, but I‚Äôll keep just plugging the nulls straight into the switch for this example. Object Merges into a switch\nSwitch SOPs are controlled by an integer parameter, so we can use an Ordered Menu to control the switch index, since they are essentially integer parameters themselves but with a more descriptive interface.\nOrdered Menu linked to a Switch SOP\nCreating a Menu Parameter for a Switch. Right Click \u003e Open in New Tab for full rez version\nCheck out this post for more info about how menus are evaluated.\nAdditional Output When you have one thing you‚Äôd like to visualize, a common technique is to add another Output SOP and connect it to your visualization geo. Whenever you want to view this visualization geo, you can just drop a Null SOP down, connect it to the extra output, and put the display flag on it (or use the Output for View Flag).\nPros Less prone to error - we aren‚Äôt changing the result of the primary output of the node We can flipbook the viz geo or view it side-by-side‚Ä¶anything like that Cons Requires the user to drop another node just to see the viz geo, or switch the Output for View Flag themselves Data from this output might not really be useful elsewhere Could add clutter to your node if you already have many outputs Since we have another output now, we can keep the final result flowing through the first output, so our users won‚Äôt get tripped up by accidentally leaving the output to something that was only meant for visualization purposes.\nFor switching between multiple visualization items, we can have just one menu on our interface somewhere called ‚ÄúVisualization Output‚Äù or something, and that can control what comes through our extra output.\nVisualization menu\nFavorite: Output for View Flag Callback Let‚Äôs take the additional output method above one step further and make it a bit slicker. It‚Äôs kind of annoying to either make a Null each time you want to view the visualization output, or click through the Output for View RMB menu (especially if you haven‚Äôt setup hotkeys for that), so let‚Äôs add a short callback to the menu parameter and do it automatically!\nThis is my favorite method because there‚Äôs no risk of accidentally leaving a menu on the wrong thing and passing the wrong output (not that I‚Äôve ever done this in production and kicked it to the farm‚Ä¶). Also, it doesn‚Äôt require the user to muck around with creating another node just to see their visualization geo.\nMore info on Node Flags from the docs.\nPros Always passing through the same result from the primary/first output No need to put down any extra nodes, or know anything about how to change the Output for View Flag All the pros of the previous methods Cons Requires a little bit of Python Setup First, we‚Äôll add another menu to control whether we‚Äôre displaying the final output geo (the fractured pieces) or the extra visualization geo.\nSecond Menu\nAnd let‚Äôs tighten up the two menus to make it a bit prettier:\nTighten it up\nOptionally, we could add a disable/hide when rule to hide the visualization menu when we‚Äôre not viewing the visualization. That‚Äôs up to you! This is where setting a menu token can be useful, since if we ever decide to change the order or this menu or add new stuff, we don‚Äôt have to update any disable/hide when rules if our menu indices changed.\nNext, we‚Äôll add a parameter callback to this new menu that will switch the Output for View Flag for us when we change it.\nQuick Recap: What is a parameter callback? Whenever a user changes a parameter in the interface (or runs a hou.Parm.pressButton() with Python), Houdini runs whatever code is in the Callback Script field in the parameter‚Äôs Parameter Description from the Type Properties or Edit Parameter Interface window.\nCallback script location\nSee the SideFX docs on Parameter Callback Scripts for more info.\nWriting our Callback When writing parameter callback scripts in Python, we get access to a dict called kwargs that passes some super useful info about the parameter and its state.\nLet‚Äôs print the value of kwargs and see what‚Äôs in it:\nkwargs dict contents\n{ 'node': \u003chou.SopNode of type subnet at /obj/geo4/fracture\u003e, 'parm': \u003chou.Parm display in /obj/geo4/fracture\u003e, 'script_multiparm_index': '-1', 'script_value0': 'viz', 'script_value': 'viz', 'parm_name': 'display', 'script_multiparm_nesting': '0', 'script_parm': 'display' } One key in particular stands out: script_value. This is the new value that the parameter was just set to. One gotcha with this is that in this dictionary, it always returns a string, and in this case it‚Äôs the token string we added when we created the menu. We should keep this in mind when we write the callback.\nMenu token/labels\nWe can use one of the following snippets for our callback:\n# In our case, we only have two menu items (0, 1) and two outputs kwargs[\"node\"].setOutputForViewFlag(kwargs[\"parm\"].evalAsInt()) or if we‚Äôd rather compare the string from the menu token:\nkwargs[\"node\"].setOutputForViewFlag(kwargs[\"script_value\"] == \"viz\") Now whenever we switch this menu, the Output for View Flag is updated on our node, and we can switch between seeing the viz geo and our actual output!\nOne Step Further This is pretty good, but if we wanted we could take it another step further and instead of using two menus, flatten it down into one. We‚Äôre kind of doing a mix of the first method and the additional output method above.\nSingle Menu\nLet‚Äôs get rid of the second menu, and add an item called ‚ÄúFractured Pieces‚Äù to index 0 of the Display menu. Now the menu has all the items in it, a lot like we had in the first example method.\nUpdate index zero\nUpdate the Switch Since our menu has one more element in it (the ‚Äúfinal‚Äù output selection in index 0), we need to subtract 1 from the switch lookup.\nUpdate the switch index\nUpdate the Callback Finally, we‚Äôll add a callback for this menu:\nUpdated Callback\nkwargs[\"node\"].setOutputForViewFlag(kwargs[\"script_value\"] != \"output\") or\nkwargs[\"node\"].setOutputForViewFlag(kwargs[\"parm\"].evalAsInt() \u003e 0) And that‚Äôs it! We can switch between our visualization geometry / intermediate step stuff from a single menu, but leave our actual output untouched!\nFinal Thoughts Housekeeping Label your outputs!\nThe Output for View Flag label in the Network Editor gets its name from the name of the Output SOP. Output for View Flag Label\nWhen you hover over an output port of an HDA, that label is set from the Type Properties dialog. Also, when this is set, the Output for View Flag label in the Network Editor will use this instead of the Output node‚Äôs name.\nOutput Label (Type Properties)\nColor your inputs/outputs if you like\nInput and output ports take on the same color as their corresponding nodes inside\nSwitch SOPs and Bitfields from Button / Icon Strips Another post coming soon!\n",
  "wordCount" : "1877",
  "inLanguage": "en",
  "image":"https://www.jamesrobinsonvfx.com/blog/display-intermediate-results-and-viz-geo/images/preview.png","datePublished": "2023-02-01T00:00:00Z",
  "dateModified": "2023-02-01T00:00:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.jamesrobinsonvfx.com/blog/display-intermediate-results-and-viz-geo/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "James Robinson üåä",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.jamesrobinsonvfx.com/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://www.jamesrobinsonvfx.com" accesskey="h" title="James Robinson üåä (Alt + H)">James Robinson üåä</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://www.jamesrobinsonvfx.com" title="blog ü™∂">
                    <span>blog ü™∂</span>
                </a>
            </li>
            <li>
                <a href="https://www.jamesrobinsonvfx.com/projects" title="projects ü™õ">
                    <span>projects ü™õ</span>
                </a>
            </li>
            <li>
                <a href="https://www.jamesrobinsonvfx.com/snippets" title="snippets üß∞">
                    <span>snippets üß∞</span>
                </a>
            </li>
            <li>
                <a href="https://www.jamesrobinsonvfx.com/links" title="links üîó">
                    <span>links üîó</span>
                </a>
            </li>
            <li>
                <a href="https://www.jamesrobinsonvfx.com/about" title="about üëã">
                    <span>about üëã</span>
                </a>
            </li>
            <li>
                <a href="https://www.jamesrobinsonvfx.com/search/" title="search üîç">
                    <span>search üîç</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Display Intermediate Results And Visualization Geo in an HDA
    </h1>
    <div class="post-meta"><span title='2023-02-01 00:00:00 +0000 UTC'>February 1, 2023</span>&nbsp;¬∑&nbsp;9 min

</div>
  </header> 
<figure class="entry-cover"><a href="https://www.jamesrobinsonvfx.com/blog/display-intermediate-results-and-viz-geo/images/preview.png" target="_blank"
            rel="noopener noreferrer">
        <img loading="lazy" srcset="https://www.jamesrobinsonvfx.com/blog/display-intermediate-results-and-viz-geo/images/preview_hu33b5bd46e71630724bf68e5b071e6b19_2232861_360x0_resize_box_3.png 360w ,https://www.jamesrobinsonvfx.com/blog/display-intermediate-results-and-viz-geo/images/preview_hu33b5bd46e71630724bf68e5b071e6b19_2232861_480x0_resize_box_3.png 480w ,https://www.jamesrobinsonvfx.com/blog/display-intermediate-results-and-viz-geo/images/preview_hu33b5bd46e71630724bf68e5b071e6b19_2232861_720x0_resize_box_3.png 720w ,https://www.jamesrobinsonvfx.com/blog/display-intermediate-results-and-viz-geo/images/preview_hu33b5bd46e71630724bf68e5b071e6b19_2232861_1080x0_resize_box_3.png 1080w ,https://www.jamesrobinsonvfx.com/blog/display-intermediate-results-and-viz-geo/images/preview_hu33b5bd46e71630724bf68e5b071e6b19_2232861_1500x0_resize_box_3.png 1500w ,https://www.jamesrobinsonvfx.com/blog/display-intermediate-results-and-viz-geo/images/preview.png 2368w" 
            sizes="(min-width: 768px) 720px, 100vw" src="https://www.jamesrobinsonvfx.com/blog/display-intermediate-results-and-viz-geo/images/preview.png" alt="Cover Photo" 
            width="2368" height="1342"></a>
        <p>Switching visualization geo in an HDA</p>
</figure><div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#overview" aria-label="Overview">Overview</a></li>
                <li>
                    <a href="#before-we-get-started" aria-label="Before We Get Started">Before We Get Started</a><ul>
                        
                <li>
                    <a href="#recap-some-basics" aria-label="Recap Some Basics">Recap Some Basics</a></li>
                <li>
                    <a href="#example-setup" aria-label="Example Setup">Example Setup</a></li>
                <li>
                    <a href="#intermediate-steps--visualization-geometry" aria-label="&amp;ldquo;Intermediate Steps&amp;rdquo; / &amp;ldquo;Visualization Geometry&amp;rdquo;?">&ldquo;Intermediate Steps&rdquo; / &ldquo;Visualization Geometry&rdquo;?</a><ul>
                        
                <li>
                    <a href="#intermediate-steps" aria-label="Intermediate Steps">Intermediate Steps</a></li>
                <li>
                    <a href="#visualization-geometry" aria-label="Visualization Geometry">Visualization Geometry</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#simple-switch-sop-and-an-ordered-menu-parameter" aria-label="Simple: Switch SOP and an Ordered Menu Parameter">Simple: Switch SOP and an Ordered Menu Parameter</a><ul>
                        <ul>
                        <ul>
                        
                <li>
                    <a href="#pros" aria-label="Pros">Pros</a></li>
                <li>
                    <a href="#cons" aria-label="Cons">Cons</a></li></ul>
                    </ul>
                    </ul>
                </li>
                <li>
                    <a href="#additional-output" aria-label="Additional Output">Additional Output</a><ul>
                        <ul>
                        <ul>
                        
                <li>
                    <a href="#pros-1" aria-label="Pros">Pros</a></li>
                <li>
                    <a href="#cons-1" aria-label="Cons">Cons</a></li></ul>
                    </ul>
                    </ul>
                </li>
                <li>
                    <a href="#favorite-output-for-view-flag-callback" aria-label="Favorite: Output for View Flag Callback">Favorite: Output for View Flag Callback</a><ul>
                        <ul>
                        <ul>
                        
                <li>
                    <a href="#pros-2" aria-label="Pros">Pros</a></li>
                <li>
                    <a href="#cons-2" aria-label="Cons">Cons</a></li></ul>
                    </ul>
                    
                <li>
                    <a href="#setup" aria-label="Setup">Setup</a><ul>
                        
                <li>
                    <a href="#quick-recap-what-is-a-parameter-callback" aria-label="Quick Recap: What is a parameter callback?">Quick Recap: What is a parameter callback?</a></li>
                <li>
                    <a href="#writing-our-callback" aria-label="Writing our Callback">Writing our Callback</a></li>
                <li>
                    <a href="#one-step-further" aria-label="One Step Further">One Step Further</a><ul>
                        
                <li>
                    <a href="#update-the-switch" aria-label="Update the Switch">Update the Switch</a></li>
                <li>
                    <a href="#update-the-callback" aria-label="Update the Callback">Update the Callback</a></li></ul>
                </li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#final-thoughts" aria-label="Final Thoughts">Final Thoughts</a><ul>
                        
                <li>
                    <a href="#housekeeping" aria-label="Housekeeping">Housekeeping</a></li>
                <li>
                    <a href="#switch-sops-and-bitfields-from-button--icon-strips" aria-label="Switch SOPs and Bitfields from Button / Icon Strips">Switch SOPs and Bitfields from Button / Icon Strips</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><blockquote>
<p>Hipfile: <a href="houdini/hip/jamesr_displayintermediateresultsandvisualizationgeo.hiplc">jamesr_displayintermediateresultsandvisualizationgeo.hip</a></p>
</blockquote>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube-nocookie.com/embed/tEfFO4VoslY" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<h1 id="overview">Overview<a hidden class="anchor" aria-hidden="true" href="#overview">üîó</a></h1>
<p>If you&rsquo;ve ever built an HDA in Houdini, you might have come across the following problem:</p>
<p><em>How can I switch between showing the final result and some visualization geo inside my HDA?</em></p>
<p>Displaying intermediate results or visualizing stuff inside an HDA can be a little tricky in Houdini, mainly since changing the Display Flag in a locked asset isn&rsquo;t allowed, and oftentimes the built-in wireframe <a href="https://www.sidefx.com/docs/houdini/ref/windows/optype.html#node">Guide Geometry</a> option isn&rsquo;t enough for the job.</p>
<p>I&rsquo;ve run into this online and in my own work, and wanted to share a couple of ways you can easily display intermediate steps or visualization geometry in the viewport without too much fuss!</p>
<p>We&rsquo;ll cover three solutions:</p>
<ul>
<li><a href="#simple-switch-sop-and-an-ordered-menu-parameter">Simple Switch SOP controlled by an Ordered Menu</a></li>
<li><a href="#additional-output">Additional Output</a></li>
<li><a href="#favorite-output-for-view-flag">Additional Output + Output for View Flag Callback</a></li>
</ul>
<p>Feel free to follow along using the hipfile above.</p>
<h1 id="before-we-get-started">Before We Get Started<a hidden class="anchor" aria-hidden="true" href="#before-we-get-started">üîó</a></h1>
<h2 id="recap-some-basics">Recap Some Basics<a hidden class="anchor" aria-hidden="true" href="#recap-some-basics">üîó</a></h2>
<ul>
<li>
<p>Whichever node has the <a href="https://www.sidefx.com/docs/houdini/network/flags.html#sop-flags">Display Flag</a> set on it is the one that shows up in the viewport. The result of the node that it&rsquo;s on is passed through the first/leftmost output (when not using an <a href="https://www.sidefx.com/docs/houdini/nodes/sop/output.html">Output SOP</a>).</p>


<p><details >
  <summary markdown="span">More info</summary>
  <figure>
  <video class="videoj" width="100%" autoplay loop muted playsinline src="images/display-flag-demo.mp4"></video>
  <figcaption><p>With no <strong>Output SOP</strong>, the <strong>Display</strong> and <strong>Render</strong> flags determine the output of your node.</p></figcaption>
</figure>

</details></p>

</li>
<li>
<p>When using <strong>Output SOPs</strong> inside a subnet/HDA, the <strong>Display Flag</strong> is ignored, and the result that&rsquo;s piped into the <strong>Output SOP</strong> (whose index is zero) is what shows up in the viewport.</p>


<p><details >
  <summary markdown="span">More info</summary>
  <figure>
  <video class="videoj" width="100%" autoplay loop muted playsinline src="images/display-flag-output-demo.mp4"></video>
  <figcaption><p></p></figcaption>
</figure>
<figure>
    <img loading="lazy" src="images/output-sop-index.png"
         alt="Caption"/> <figcaption>
            <p>Caption</p>
        </figcaption>
</figure>

</details></p>

</li>
<li>
<p>HDAs/Subnets can have multiple outputs when using the <strong>Output SOP</strong>.</p>


<p><details >
  <summary markdown="span">More info</summary>
  <figure>
    <img loading="lazy" src="images/multiple-outputs.png"
         alt="Multiple Outputs"/> <figcaption>
            <p>Multiple Outputs</p>
        </figcaption>
</figure>

</details></p>

</li>
<li>
<p>You can change the <a href="/blog/multi-output-display-hotkeys"><strong>Output for View Flag</strong></a> to switch which output is shown in the viewport.</p>


<p><details >
  <summary markdown="span">More info</summary>
  <figure>
    <img loading="lazy" src="../multi-output-display-hotkeys/images/rmb-menu.png"
         alt="Output for View Menu"/> <figcaption>
            <p>Output for View Menu</p>
        </figcaption>
</figure>

</details></p>

</li>
<li>
<p><strong>Display Flag</strong> can <em><strong>not</strong></em> be moved inside of a locked HDA, even with a Python callback.</p>


<p><details >
  <summary markdown="span">More info</summary>
  <figure>
    <img loading="lazy" src="images/display-flag-permission-denied.png"
         alt="Permission Denied (Interface)" height="300px"/> <figcaption>
            <p>Permission Denied (Interface)</p>
        </figcaption>
</figure>
<figure>
    <img loading="lazy" src="images/display-flag-python-permission-error.png"
         alt="Permission Denied (Python)"/> <figcaption>
            <p>Permission Denied (Python)</p>
        </figcaption>
</figure>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>node <span style="color:#81a1c1">=</span> hou<span style="color:#81a1c1">.</span>node<span style="color:#eceff4">(</span><span style="color:#a3be8c">&#34;/obj/locked_asset/displayflagcallback&#34;</span><span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>node<span style="color:#81a1c1">.</span>node<span style="color:#eceff4">(</span><span style="color:#a3be8c">&#34;torus&#34;</span><span style="color:#eceff4">)</span><span style="color:#81a1c1">.</span>setDisplayFlag<span style="color:#eceff4">(</span><span style="color:#81a1c1;font-weight:bold">True</span><span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Traceback <span style="color:#eceff4">(</span>most recent call last<span style="color:#eceff4">):</span>
</span></span><span style="display:flex;"><span>File <span style="color:#a3be8c">&#34;&lt;console&gt;&#34;</span><span style="color:#eceff4">,</span> line <span style="color:#b48ead">1</span><span style="color:#eceff4">,</span> <span style="color:#81a1c1;font-weight:bold">in</span> <span style="color:#81a1c1">&lt;</span>module<span style="color:#81a1c1">&gt;</span>
</span></span><span style="display:flex;"><span>File <span style="color:#a3be8c">&#34;/Applications/Houdini/Current/Frameworks/Houdini.framework/Versions/Current/Resources/houdini/python3.9libs/hou.py&#34;</span><span style="color:#eceff4">,</span> line <span style="color:#b48ead">79</span> <span style="color:#b48ead">410</span><span style="color:#eceff4">,</span> <span style="color:#81a1c1;font-weight:bold">in</span> setDisplayFlag
</span></span><span style="display:flex;"><span>    <span style="color:#81a1c1;font-weight:bold">return</span> _hou<span style="color:#81a1c1">.</span>SopNode_setDisplayFlag<span style="color:#eceff4">(</span>self<span style="color:#eceff4">,</span> on<span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>hou<span style="color:#81a1c1">.</span>PermissionError<span style="color:#eceff4">:</span> Failed to modify node <span style="color:#81a1c1;font-weight:bold">or</span> parameter because of a permission error<span style="color:#81a1c1">.</span>  Possible causes include locked assets<span style="color:#eceff4">,</span> takes<span style="color:#eceff4">,</span> product permissions <span style="color:#81a1c1;font-weight:bold">or</span> user specified permissions
</span></span></code></pre></div>
</details></p>

</li>
<li>
<p>You could get even fancier than this tutorial using <a href="https://www.sidefx.com/docs/houdini/hom/python_states.html">Python Viewer States</a>, but we won&rsquo;t be covering that here.</p>
</li>
</ul>
<h2 id="example-setup">Example Setup<a hidden class="anchor" aria-hidden="true" href="#example-setup">üîó</a></h2>
<p>To demonstrate, we&rsquo;ll be creating a super simple Voronoi fracturing HDA. The focus is definitely not on how this tool works, but how we can improve the user experience!</p>
<figure>
    <img loading="lazy" src="images/basic-example-setup-network-editor.png"
         alt="Basic Example Setup" height="750px"/> <figcaption>
            <p>Basic Example Setup</p>
        </figcaption>
</figure>

<h2 id="intermediate-steps--visualization-geometry">&ldquo;Intermediate Steps&rdquo; / &ldquo;Visualization Geometry&rdquo;?<a hidden class="anchor" aria-hidden="true" href="#intermediate-steps--visualization-geometry">üîó</a></h2>
<p>I&rsquo;ve mentioned the terms <strong>Intermediate Steps</strong> and <strong>Visualization Geometry</strong> twice now, but I should explain a bit more clearly what I mean in terms of the example setup that we&rsquo;ll use for the rest of the tutorial.</p>
<h3 id="intermediate-steps">Intermediate Steps<a hidden class="anchor" aria-hidden="true" href="#intermediate-steps">üîó</a></h3>
<p>When your HDA wraps up a workflow that does a few things in order (like our example), it can be helpful to be able to see the result of each step. In this example, we&rsquo;re building a basic fracturing HDA. For debugging purposes, it could be good to be able to inspect the noised-up volume and the scattered points. Creating these geometries is what I&rsquo;m referring to as <strong>Intermediate Steps</strong>. They contribute to, but are not the final result.</p>
<h3 id="visualization-geometry">Visualization Geometry<a hidden class="anchor" aria-hidden="true" href="#visualization-geometry">üîó</a></h3>
<p>It could also be nice to see an exploded view of all our pieces with different colors assigned to them (for this example&hellip;probably not <em>that</em> useful in practice, but let&rsquo;s use it here as a demo!). Since this doesn&rsquo;t really contribute to the final result at all and is just for debugging/inspection, I call it <strong>Visualization Geometry</strong>.</p>
<h1 id="simple-switch-sop-and-an-ordered-menu-parameter">Simple: Switch SOP and an Ordered Menu Parameter<a hidden class="anchor" aria-hidden="true" href="#simple-switch-sop-and-an-ordered-menu-parameter">üîó</a></h1>
<p>First up, we have the simplest method: We&rsquo;ll use a <strong>Switch SOP</strong> to switch what our node outputs, and link it to an <strong>Ordered Menu</strong> Parameter.</p>
<hr>
<h4 id="pros">Pros<a hidden class="anchor" aria-hidden="true" href="#pros">üîó</a></h4>
<ul>
<li>Simple to set up</li>
</ul>
<h4 id="cons">Cons<a hidden class="anchor" aria-hidden="true" href="#cons">üîó</a></h4>
<ul>
<li>Easy to forget and accidentally leave the menu on the wrong selection and output the wrong thing</li>
</ul>
<hr>
<p>First, let&rsquo;s create some <strong>Null SOPs</strong> to use as &ldquo;anchors&rdquo; for each thing we want to switch between. This helps keeps things clean, organized, and flexible.</p>
<figure>
    <img loading="lazy" src="images/anchor-nulls.png"
         alt="Anchor Nulls for each step" height="750px"/> <figcaption>
            <p>Anchor Nulls for each step</p>
        </figcaption>
</figure>

<p>Next we&rsquo;ll plug all our nulls into the switch in the same order that we want to have their corresponding items in the dropdown menu.</p>
<figure>
    <img loading="lazy" src="images/nulls-into-switch.png"
         alt="Nulls plugged into switch" height="750px"/> <figcaption>
            <p>Nulls plugged into switch</p>
        </figcaption>
</figure>

<ol>
<li>Final Result (Fractured Pieces)</li>
<li>Noised-up Volume</li>
<li>Points</li>
<li>Exploded / Colorized Pieces</li>
</ol>
<blockquote>
<p>Another common technique is to create an <strong>Object Merge</strong> for each <strong>Null</strong> and put the switch off to the side to reduce clutter, but I&rsquo;ll keep just plugging the nulls straight into the switch for this example.
<figure>
    <img loading="lazy" src="images/object-merges-into-a-switch.png"
         alt="Object Merges into a switch"/> <figcaption>
            <p>Object Merges into a switch</p>
        </figcaption>
</figure>
</p>
</blockquote>
<p><strong>Switch SOPs</strong> are controlled by an integer parameter, so we can use an <strong>Ordered Menu</strong> to control the switch index, since they are essentially integer parameters themselves but with a more descriptive interface.</p>
<figure>
    <img loading="lazy" src="images/ordered-menu-switch-sop.png"
         alt="Ordered Menu linked to a Switch SOP"/> <figcaption>
            <p>Ordered Menu linked to a Switch SOP</p>
        </figcaption>
</figure>

<p><figure>
  <video class="videoj" width="100%" autoplay loop muted playsinline src="images/ordered-menu-switch-fast.mp4"></video>
  <figcaption><p></p></figcaption>
</figure>
Creating a Menu Parameter for a Switch. Right Click &gt; Open in New Tab for full rez version</p>
<blockquote>
<p>Check out <a href="/blog/evaluating-menu-parameters">this post</a> for more info about how menus are evaluated.</p>
</blockquote>
<h1 id="additional-output">Additional Output<a hidden class="anchor" aria-hidden="true" href="#additional-output">üîó</a></h1>
<p>When you have one thing you&rsquo;d like to visualize, a common technique is to add another <strong>Output SOP</strong> and connect it to your visualization geo. Whenever you want to view this visualization geo, you can just drop a <strong>Null SOP</strong> down, connect it to the extra output, and put the display flag on it (or use the <a href="/tips/2021/12/13/multi-output-display-hotkeys"><strong>Output for View Flag</strong></a>).</p>
<figure>
  <video class="videoj" width="100%" autoplay loop muted playsinline src="images/additional-output.mp4"></video>
  <figcaption><p></p></figcaption>
</figure>
<hr>
<h4 id="pros-1">Pros<a hidden class="anchor" aria-hidden="true" href="#pros-1">üîó</a></h4>
<ul>
<li>Less prone to error - we aren&rsquo;t changing the result of the primary output of the node</li>
<li>We can flipbook the viz geo or view it side-by-side&hellip;anything like that</li>
</ul>
<h4 id="cons-1">Cons<a hidden class="anchor" aria-hidden="true" href="#cons-1">üîó</a></h4>
<ul>
<li>Requires the user to drop another node just to see the viz geo, or switch the
<strong>Output for View Flag</strong> themselves</li>
<li>Data from this output might not really be useful elsewhere</li>
<li>Could add clutter to your node if you already have many outputs</li>
</ul>
<hr>
<p>Since we have another output now, we can keep the final result flowing through the first output, so our users won&rsquo;t get tripped up by accidentally leaving the output to something that was only meant for visualization purposes.</p>
<p>For switching between multiple visualization items, we can have just one menu on our interface somewhere called &ldquo;Visualization Output&rdquo; or something, and that can control what comes through our extra output.</p>
<figure>
    <img loading="lazy" src="images/additional-output-viz-menu.png"
         alt="Visualization menu"/> <figcaption>
            <p>Visualization menu</p>
        </figcaption>
</figure>

<h1 id="favorite-output-for-view-flag-callback">Favorite: Output for View Flag Callback<a hidden class="anchor" aria-hidden="true" href="#favorite-output-for-view-flag-callback">üîó</a></h1>
<p>Let&rsquo;s take the <a href="#additional-output">additional output</a> method above one step further and make it a bit slicker. It&rsquo;s kind of annoying to either make a <strong>Null</strong> each time you want to view the visualization output, or click through the <strong>Output for View</strong> RMB menu (especially if you haven&rsquo;t <a href="/blog/multi-output-display-hotkeys">setup hotkeys for that</a>), so let&rsquo;s add a short callback to the menu parameter and do it automatically!</p>
<p>This is my favorite method because there&rsquo;s no risk of accidentally leaving a menu on the wrong thing and passing the wrong output (not that I&rsquo;ve ever done this in production and kicked it to the farm&hellip;). Also, it doesn&rsquo;t require the user to muck around with creating another node just to see their visualization geo.</p>
<blockquote>
<p>More info on <a href="https://www.sidefx.com/docs/houdini/network/menus.html#node-context-menu">Node Flags</a> from the docs.</p>
</blockquote>
<hr>
<h4 id="pros-2">Pros<a hidden class="anchor" aria-hidden="true" href="#pros-2">üîó</a></h4>
<ul>
<li>Always passing through the same result from the primary/first output</li>
<li>No need to put down any extra nodes, or know anything about how to change the <strong>Output for View Flag</strong></li>
<li>All the pros of the previous methods</li>
</ul>
<h4 id="cons-2">Cons<a hidden class="anchor" aria-hidden="true" href="#cons-2">üîó</a></h4>
<ul>
<li>Requires a little bit of Python</li>
</ul>
<hr>
<h2 id="setup">Setup<a hidden class="anchor" aria-hidden="true" href="#setup">üîó</a></h2>
<p>First, we&rsquo;ll add another menu to control whether we&rsquo;re displaying the final output geo (the fractured pieces) or the extra visualization geo.</p>
<figure>
    <img loading="lazy" src="images/second-menu.png"
         alt="Second Menu"/> <figcaption>
            <p>Second Menu</p>
        </figcaption>
</figure>

<p>And let&rsquo;s tighten up the two menus to make it a bit prettier:</p>
<figure>
  <video class="videoj" width="100%" autoplay loop muted playsinline src="images/tighten-it-up-2x.mp4"></video>
  <figcaption><p>Tighten it up</p></figcaption>
</figure>
<blockquote>
<p>Optionally, we <em>could</em> add a <a href="https://www.sidefx.com/docs/houdini/ref/windows/optype.html#conditions">disable/hide when rule</a> to hide the visualization menu when we&rsquo;re not viewing the visualization. That&rsquo;s up to you! This is where setting a menu token can be useful, since if we ever decide to change the order or this menu or add new stuff, we don&rsquo;t have to update any disable/hide when rules if our menu indices changed.</p>
</blockquote>
<p>Next, we&rsquo;ll add a parameter callback to this new menu that will switch the <strong>Output for View Flag</strong> for us when we change it.</p>
<h3 id="quick-recap-what-is-a-parameter-callback">Quick Recap: What is a parameter callback?<a hidden class="anchor" aria-hidden="true" href="#quick-recap-what-is-a-parameter-callback">üîó</a></h3>
<p>Whenever a user changes a parameter in the interface (or runs a
<code>hou.Parm.pressButton()</code> with Python), Houdini runs whatever code is in the <strong>Callback Script</strong> field in the parameter&rsquo;s <strong>Parameter Description</strong> from the <strong>Type Properties</strong> or <strong>Edit Parameter Interface</strong> window.</p>
<figure>
    <img loading="lazy" src="images/callback-script-location.png"
         alt="Callback script location"/> <figcaption>
            <p>Callback script location</p>
        </figcaption>
</figure>

<figure>
  <video class="videoj" width="100%" autoplay loop muted playsinline src="images/callback-demo.mp4"></video>
  <figcaption><p></p></figcaption>
</figure>
<blockquote>
<p>See the SideFX docs on <a href="https://www.sidefx.com/docs/houdini/hom/locations.html#parameter_callback_scripts">Parameter Callback Scripts</a> for more info.</p>
</blockquote>
<hr>
<h3 id="writing-our-callback">Writing our Callback<a hidden class="anchor" aria-hidden="true" href="#writing-our-callback">üîó</a></h3>
<p>When writing parameter callback scripts in Python, we get access to a <code>dict</code> called <code>kwargs</code> that passes some super useful info about the parameter and its state.</p>
<p>Let&rsquo;s print the value of <code>kwargs</code> and see what&rsquo;s in it:</p>
<figure>
    <img loading="lazy" src="images/kwargs-dict-contents.png"
         alt="`kwargs` `dict` contents"/> <figcaption>
            <p><code>kwargs</code> <code>dict</code> contents</p>
        </figcaption>
</figure>

<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a3be8c">&#39;node&#39;</span><span style="color:#eceff4">:</span> <span style="color:#81a1c1">&lt;</span>hou<span style="color:#81a1c1">.</span>SopNode of <span style="color:#81a1c1">type</span> subnet at <span style="color:#81a1c1">/</span>obj<span style="color:#81a1c1">/</span>geo4<span style="color:#81a1c1">/</span>fracture<span style="color:#81a1c1">&gt;</span><span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a3be8c">&#39;parm&#39;</span><span style="color:#eceff4">:</span> <span style="color:#81a1c1">&lt;</span>hou<span style="color:#81a1c1">.</span>Parm display <span style="color:#81a1c1;font-weight:bold">in</span> <span style="color:#81a1c1">/</span>obj<span style="color:#81a1c1">/</span>geo4<span style="color:#81a1c1">/</span>fracture<span style="color:#81a1c1">&gt;</span><span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a3be8c">&#39;script_multiparm_index&#39;</span><span style="color:#eceff4">:</span> <span style="color:#a3be8c">&#39;-1&#39;</span><span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a3be8c">&#39;script_value0&#39;</span><span style="color:#eceff4">:</span> <span style="color:#a3be8c">&#39;viz&#39;</span><span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a3be8c">&#39;script_value&#39;</span><span style="color:#eceff4">:</span> <span style="color:#a3be8c">&#39;viz&#39;</span><span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a3be8c">&#39;parm_name&#39;</span><span style="color:#eceff4">:</span> <span style="color:#a3be8c">&#39;display&#39;</span><span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a3be8c">&#39;script_multiparm_nesting&#39;</span><span style="color:#eceff4">:</span> <span style="color:#a3be8c">&#39;0&#39;</span><span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a3be8c">&#39;script_parm&#39;</span><span style="color:#eceff4">:</span> <span style="color:#a3be8c">&#39;display&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#eceff4">}</span>
</span></span></code></pre></div><p>One key in particular stands out: <code>script_value</code>. This is the new value that the parameter was just set to. One gotcha with this is that in this dictionary, it always returns a <code>string</code>, and in this case it&rsquo;s the token string we added when we created the menu. We should keep this in mind when we write the callback.</p>
<figure>
    <img loading="lazy" src="images/menu-token-labels.png"
         alt="Menu token/labels"/> <figcaption>
            <p>Menu token/labels</p>
        </figcaption>
</figure>

<p>We can use one of the following snippets for our callback:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#616e87;font-style:italic"># In our case, we only have two menu items (0, 1) and two outputs</span>
</span></span><span style="display:flex;"><span>kwargs<span style="color:#eceff4">[</span><span style="color:#a3be8c">&#34;node&#34;</span><span style="color:#eceff4">]</span><span style="color:#81a1c1">.</span>setOutputForViewFlag<span style="color:#eceff4">(</span>kwargs<span style="color:#eceff4">[</span><span style="color:#a3be8c">&#34;parm&#34;</span><span style="color:#eceff4">]</span><span style="color:#81a1c1">.</span>evalAsInt<span style="color:#eceff4">())</span>
</span></span></code></pre></div><p>or if we&rsquo;d rather compare the string from the menu token:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>kwargs<span style="color:#eceff4">[</span><span style="color:#a3be8c">&#34;node&#34;</span><span style="color:#eceff4">]</span><span style="color:#81a1c1">.</span>setOutputForViewFlag<span style="color:#eceff4">(</span>kwargs<span style="color:#eceff4">[</span><span style="color:#a3be8c">&#34;script_value&#34;</span><span style="color:#eceff4">]</span> <span style="color:#81a1c1">==</span> <span style="color:#a3be8c">&#34;viz&#34;</span><span style="color:#eceff4">)</span>
</span></span></code></pre></div><p>Now whenever we switch this menu, the <strong>Output for View Flag</strong> is updated on our node, and we can switch between seeing the viz geo and our actual output!</p>
<figure>
  <video class="videoj" width="100%" autoplay loop muted playsinline src="images/switching-the-menu.mp4"></video>
  <figcaption><p></p></figcaption>
</figure>
<h3 id="one-step-further">One Step Further<a hidden class="anchor" aria-hidden="true" href="#one-step-further">üîó</a></h3>
<p>This is pretty good, but if we wanted we could take it another step further and instead of using two menus, flatten it down into one. We&rsquo;re kind of doing a mix of the <a href="#simple-switch-sop-and-an-ordered-menu-parameter">first method</a> and the <a href="#additional-output">additional output method</a> above.</p>
<figure>
    <img loading="lazy" src="images/single-menu.png"
         alt="Single Menu"/> <figcaption>
            <p>Single Menu</p>
        </figcaption>
</figure>

<p>Let&rsquo;s get rid of the second menu, and add an item called &ldquo;Fractured Pieces&rdquo; to index 0 of the <strong>Display</strong> menu. Now the menu has all the items in it, a lot like we had in the first example method.</p>
<figure>
    <img loading="lazy" src="images/update-index-zero.png"
         alt="Update index zero"/> <figcaption>
            <p>Update index zero</p>
        </figcaption>
</figure>

<h4 id="update-the-switch">Update the Switch<a hidden class="anchor" aria-hidden="true" href="#update-the-switch">üîó</a></h4>
<p>Since our menu has one more element in it (the &ldquo;final&rdquo; output selection in index 0), we need to subtract <code>1</code> from the switch lookup.</p>
<figure>
    <img loading="lazy" src="images/update-the-switch-index.png"
         alt="Update the switch index"/> <figcaption>
            <p>Update the switch index</p>
        </figcaption>
</figure>

<h4 id="update-the-callback">Update the Callback<a hidden class="anchor" aria-hidden="true" href="#update-the-callback">üîó</a></h4>
<p>Finally, we&rsquo;ll add a callback for this menu:</p>
<figure>
    <img loading="lazy" src="images/updated-callback.png"
         alt="Updated Callback"/> <figcaption>
            <p>Updated Callback</p>
        </figcaption>
</figure>

<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>kwargs<span style="color:#eceff4">[</span><span style="color:#a3be8c">&#34;node&#34;</span><span style="color:#eceff4">]</span><span style="color:#81a1c1">.</span>setOutputForViewFlag<span style="color:#eceff4">(</span>kwargs<span style="color:#eceff4">[</span><span style="color:#a3be8c">&#34;script_value&#34;</span><span style="color:#eceff4">]</span> <span style="color:#81a1c1">!=</span> <span style="color:#a3be8c">&#34;output&#34;</span><span style="color:#eceff4">)</span>
</span></span></code></pre></div><p>or</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>kwargs<span style="color:#eceff4">[</span><span style="color:#a3be8c">&#34;node&#34;</span><span style="color:#eceff4">]</span><span style="color:#81a1c1">.</span>setOutputForViewFlag<span style="color:#eceff4">(</span>kwargs<span style="color:#eceff4">[</span><span style="color:#a3be8c">&#34;parm&#34;</span><span style="color:#eceff4">]</span><span style="color:#81a1c1">.</span>evalAsInt<span style="color:#eceff4">()</span> <span style="color:#81a1c1">&gt;</span> <span style="color:#b48ead">0</span><span style="color:#eceff4">)</span>
</span></span></code></pre></div><p>And that&rsquo;s it! We can switch between our visualization geometry / intermediate step stuff from a single menu, but leave our actual output untouched!</p>
<figure>
  <video class="videoj" width="100%" autoplay loop muted playsinline src="images/output-for-view-single-menu.mp4"></video>
  <figcaption><p></p></figcaption>
</figure>
<h1 id="final-thoughts">Final Thoughts<a hidden class="anchor" aria-hidden="true" href="#final-thoughts">üîó</a></h1>
<h2 id="housekeeping">Housekeeping<a hidden class="anchor" aria-hidden="true" href="#housekeeping">üîó</a></h2>
<ul>
<li>
<p>Label your outputs!</p>
<p>The <strong>Output for View Flag</strong> label in the Network Editor gets its name from the name of the <strong>Output SOP</strong>.
<figure>
        <img loading="lazy" src="images/output-for-view-flag-label.png"
             alt="Output for View Flag Label"/> <figcaption>
                <p>Output for View Flag Label</p>
            </figcaption>
    </figure>
</p>
<p>When you hover over an output port of an <strong>HDA</strong>, that label is set from the <strong>Type Properties</strong> dialog. Also, when this is set, the <strong>Output for View Flag</strong> label in the Network Editor will use this instead of the Output node&rsquo;s name.</p>
<figure>
        <img loading="lazy" src="images/output-label-type-properties.png"
             alt="Output Label (Type Properties)"/> <figcaption>
                <p>Output Label (Type Properties)</p>
            </figcaption>
    </figure>

</li>
<li>
<p>Color your inputs/outputs if you like</p>
<figure>
        <img loading="lazy" src="images/input-output-colors.png"
             alt="Input/Output Colors"/> <figcaption>
                <p>Input and output ports take on the same color as their corresponding nodes inside</p>
            </figcaption>
    </figure>

</li>
</ul>
<hr>
<h2 id="switch-sops-and-bitfields-from-button--icon-strips">Switch SOPs and Bitfields from Button / Icon Strips<a hidden class="anchor" aria-hidden="true" href="#switch-sops-and-bitfields-from-button--icon-strips">üîó</a></h2>
<p>Another post coming soon!</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://www.jamesrobinsonvfx.com/tags/houdini/">houdini</a></li>
      <li><a href="https://www.jamesrobinsonvfx.com/tags/ui/">ui</a></li>
      <li><a href="https://www.jamesrobinsonvfx.com/tags/python/">python</a></li>
      <li><a href="https://www.jamesrobinsonvfx.com/tags/hda/">hda</a></li>
      <li><a href="https://www.jamesrobinsonvfx.com/tags/subnet/">subnet</a></li>
      <li><a href="https://www.jamesrobinsonvfx.com/tags/tools/">tools</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://www.jamesrobinsonvfx.com">James Robinson üåä</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js" integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script>
const images = Array.from(document.querySelectorAll(".post-content img"));
images.forEach(img => {
  mediumZoom(img, {
    margin: 0,  
    scrollOffset: 40,  
    container: null,  
    template: null,  
    background: 'rgba(0, 0, 0, 0.8)'  
  });
});
</script>


<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
