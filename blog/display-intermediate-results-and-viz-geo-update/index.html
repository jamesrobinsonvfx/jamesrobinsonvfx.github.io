<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Display Intermediate Results and Viz Geo [Update] | James Robinson üåä</title>
<meta name="keywords" content="">
<meta name="description" content="A minor improvement on the previous post">
<meta name="author" content="">
<link rel="canonical" href="https://www.jamesrobinsonvfx.com/blog/display-intermediate-results-and-viz-geo-update/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.31a1ec8ce187fd44934e170601c332903bca9bc902e9bca2c4b7205cf7203d32.css" integrity="sha256-MaHsjOGH/USTThcGAcMykDvKm8kC6byixLcgXPcgPTI=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://www.jamesrobinsonvfx.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.jamesrobinsonvfx.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.jamesrobinsonvfx.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://www.jamesrobinsonvfx.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://www.jamesrobinsonvfx.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üåä</text></svg>">
<meta property="og:title" content="Display Intermediate Results and Viz Geo [Update]" />
<meta property="og:description" content="A minor improvement on the previous post" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.jamesrobinsonvfx.com/blog/display-intermediate-results-and-viz-geo-update/" />
<meta property="og:image" content="https://www.jamesrobinsonvfx.com/blog/display-intermediate-results-and-viz-geo-update/images/preview.png" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2023-02-15T00:00:00+00:00" />
<meta property="article:modified_time" content="2023-02-15T00:00:00+00:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://www.jamesrobinsonvfx.com/blog/display-intermediate-results-and-viz-geo-update/images/preview.png" />
<meta name="twitter:title" content="Display Intermediate Results and Viz Geo [Update]"/>
<meta name="twitter:description" content="A minor improvement on the previous post"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Blog ü™∂",
      "item": "https://www.jamesrobinsonvfx.com/blog/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Display Intermediate Results and Viz Geo [Update]",
      "item": "https://www.jamesrobinsonvfx.com/blog/display-intermediate-results-and-viz-geo-update/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Display Intermediate Results and Viz Geo [Update]",
  "name": "Display Intermediate Results and Viz Geo [Update]",
  "description": "A minor improvement on the previous post",
  "keywords": [
    
  ],
  "articleBody": " Hipfile: jamesr_displayintermediateresultsandvisualizationgeoupdate.hiplc\nOverview One thing I didn‚Äôt realize until after I posted the last blog post/video is that you can actually add an output with a negative index! This output won‚Äôt show up as a port on the node.\nNegative Output Index\nWe can see this on the RBD Configure SOP. When we hit Enter in the viewport to enter the node‚Äôs Viewer State, we are switched to viewing the -1 output.\nRBD Configure Negative Output\nRBD Configure Contents\nWe can‚Äôt actually hook up to this output in the network editor, which could make this an excellent option since it causes less clutter!\nExample Let‚Äôs implement something similar ourselves. We‚Äôll create a setup that takes some input geo and adds some point normals to it. It will have a couple of false-color visualization modes: Height and Normal.\nWhen we switch our Display menu, if we select anything except the ‚Äúfinal result‚Äù of the node let‚Äôs switch to showing the -1 output in the viewport (which will only be outputting the visualization geo).\nOpen the hipfile and see the attached setup (or copy it from the screenshots):\nExample Overview\nExample Contents\nCreate an Ordered Menu Parameter called display with the following token/value pairs:\nMenu Tokens\nDon‚Äôt forget to link it up to your visualizer switch!\nSwitch (minus one)\nWe subtract 1 since we‚Äôre using index 0 of the menu to select our actual output geo, and if we didn‚Äôt subtract 1 our switch would be off by one.\nAdd a callback to the menu parameter that will switch to the -1 output whenever we select one of the visualizer options.\nkwargs[\"node\"].setOutputForViewFlag(-1 if kwargs[\"script_value\"] != \"output\" else 0) Menu Callback\nAnd that‚Äôs it!\n",
  "wordCount" : "281",
  "inLanguage": "en",
  "image":"https://www.jamesrobinsonvfx.com/blog/display-intermediate-results-and-viz-geo-update/images/preview.png","datePublished": "2023-02-15T00:00:00Z",
  "dateModified": "2023-02-15T00:00:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.jamesrobinsonvfx.com/blog/display-intermediate-results-and-viz-geo-update/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "James Robinson üåä",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.jamesrobinsonvfx.com/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://www.jamesrobinsonvfx.com" accesskey="h" title="James Robinson üåä (Alt + H)">James Robinson üåä</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://www.jamesrobinsonvfx.com" title="blog ü™∂">
                    <span>blog ü™∂</span>
                </a>
            </li>
            <li>
                <a href="https://www.jamesrobinsonvfx.com/projects" title="projects ü™õ">
                    <span>projects ü™õ</span>
                </a>
            </li>
            <li>
                <a href="https://www.jamesrobinsonvfx.com/snippets" title="snippets üß∞">
                    <span>snippets üß∞</span>
                </a>
            </li>
            <li>
                <a href="https://www.jamesrobinsonvfx.com/links" title="links üîó">
                    <span>links üîó</span>
                </a>
            </li>
            <li>
                <a href="https://www.jamesrobinsonvfx.com/about" title="about üëã">
                    <span>about üëã</span>
                </a>
            </li>
            <li>
                <a href="https://www.jamesrobinsonvfx.com/search/" title="search üîç">
                    <span>search üîç</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Display Intermediate Results and Viz Geo [Update]
    </h1>
    <div class="post-meta"><span title='2023-02-15 00:00:00 +0000 UTC'>February 15, 2023</span>&nbsp;¬∑&nbsp;2 min

</div>
  </header> 
<figure class="entry-cover"><a href="https://www.jamesrobinsonvfx.com/blog/display-intermediate-results-and-viz-geo-update/images/preview.png" target="_blank"
            rel="noopener noreferrer">
        <img loading="lazy" srcset="https://www.jamesrobinsonvfx.com/blog/display-intermediate-results-and-viz-geo-update/images/preview_hubd8ec1d1108b3ed26939998be633571d_2047034_360x0_resize_box_3.png 360w ,https://www.jamesrobinsonvfx.com/blog/display-intermediate-results-and-viz-geo-update/images/preview_hubd8ec1d1108b3ed26939998be633571d_2047034_480x0_resize_box_3.png 480w ,https://www.jamesrobinsonvfx.com/blog/display-intermediate-results-and-viz-geo-update/images/preview_hubd8ec1d1108b3ed26939998be633571d_2047034_720x0_resize_box_3.png 720w ,https://www.jamesrobinsonvfx.com/blog/display-intermediate-results-and-viz-geo-update/images/preview_hubd8ec1d1108b3ed26939998be633571d_2047034_1080x0_resize_box_3.png 1080w ,https://www.jamesrobinsonvfx.com/blog/display-intermediate-results-and-viz-geo-update/images/preview_hubd8ec1d1108b3ed26939998be633571d_2047034_1500x0_resize_box_3.png 1500w ,https://www.jamesrobinsonvfx.com/blog/display-intermediate-results-and-viz-geo-update/images/preview.png 2368w" 
            sizes="(min-width: 768px) 720px, 100vw" src="https://www.jamesrobinsonvfx.com/blog/display-intermediate-results-and-viz-geo-update/images/preview.png" alt="Cover Photo" 
            width="2368" height="1342"></a>
        <p>Slightly nicer way to output using a negative index</p>
</figure><div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#overview" aria-label="Overview">Overview</a></li>
                <li>
                    <a href="#example" aria-label="Example">Example</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><blockquote>
<p>Hipfile: <a href="houdini/hip/jamesr_displayintermediateresultsandvisualizationgeoupdate.hiplc">jamesr_displayintermediateresultsandvisualizationgeoupdate.hiplc</a></p>
</blockquote>
<figure>
  <video class="videoj" width="100%" autoplay loop muted playsinline src="images/demo-menu.mp4"></video>
  <figcaption><p></p></figcaption>
</figure>
<h1 id="overview">Overview<a hidden class="anchor" aria-hidden="true" href="#overview">üîó</a></h1>
<p>One thing I didn‚Äôt realize until after I posted the last <a href="blog/display-intermediate-results-and-visualization-geo/">blog post/video</a> is that you can actually add an output with a <strong>negative index</strong>! This output won‚Äôt show up as a port on the node.</p>
<figure>
    <img loading="lazy" src="images/negative-output-index.png"
         alt="Negative Output Index"/> <figcaption>
            <p>Negative Output Index</p>
        </figcaption>
</figure>

<p>We can see this on the <strong>RBD Configure SOP</strong>. When we hit Enter in the viewport to enter the node‚Äôs Viewer State, we are switched to viewing the <code>-1</code> output.</p>
<figure>
    <img loading="lazy" src="images/rbd-configure-output.png"
         alt="RBD Configure Negative Output"/> <figcaption>
            <p>RBD Configure Negative Output</p>
        </figcaption>
</figure>

<figure>
    <img loading="lazy" src="images/rbd-configure-contents.png"
         alt="RBD Configure Contents"/> <figcaption>
            <p>RBD Configure Contents</p>
        </figcaption>
</figure>

<p>We can‚Äôt actually hook up to this output in the network editor, which could make this an excellent option since it causes less clutter!</p>
<h1 id="example">Example<a hidden class="anchor" aria-hidden="true" href="#example">üîó</a></h1>
<p>Let‚Äôs implement something similar ourselves. We&rsquo;ll create a setup that takes some input geo and adds some point normals to it. It will have a couple of false-color visualization modes: <strong>Height</strong> and <strong>Normal</strong>.</p>
<p>When we switch our <strong>Display</strong> menu, if we select anything except the &ldquo;final result&rdquo; of the node let&rsquo;s switch to showing the <code>-1</code> output in the viewport (which will only be outputting the visualization geo).</p>
<ol>
<li>
<p>Open the hipfile and see the attached setup (or copy it from the screenshots):</p>
<figure>
        <img loading="lazy" src="images/example-overview.png"
             alt="Example Overview"/> <figcaption>
                <p>Example Overview</p>
            </figcaption>
    </figure>

<figure>
        <img loading="lazy" src="images/example-contents.png"
             alt="Example Contents"/> <figcaption>
                <p>Example Contents</p>
            </figcaption>
    </figure>

</li>
<li>
<p>Create an <strong>Ordered Menu</strong> Parameter called <code>display</code> with the following token/value pairs:</p>
<figure>
        <img loading="lazy" src="images/menu-tokens.png"
             alt="Menu Tokens"/> <figcaption>
                <p>Menu Tokens</p>
            </figcaption>
    </figure>

</li>
<li>
<p>Don&rsquo;t forget to link it up to your visualizer switch!</p>
<figure>
        <img loading="lazy" src="images/switch-minus-one.png"
             alt="Switch (minus one)"/> <figcaption>
                <p>Switch (minus one)</p>
            </figcaption>
    </figure>

<blockquote>
<p>We subtract <code>1</code> since we&rsquo;re using index <code>0</code> of the menu to select our actual output geo, and if we didn&rsquo;t subtract 1 our switch would be off by one.</p>
</blockquote>
</li>
<li>
<p>Add a callback to the menu parameter that will switch to the <code>-1</code> output
whenever we select one of the visualizer options.</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>kwargs<span style="color:#eceff4">[</span><span style="color:#a3be8c">&#34;node&#34;</span><span style="color:#eceff4">]</span><span style="color:#81a1c1">.</span>setOutputForViewFlag<span style="color:#eceff4">(</span><span style="color:#81a1c1">-</span><span style="color:#b48ead">1</span> <span style="color:#81a1c1;font-weight:bold">if</span> kwargs<span style="color:#eceff4">[</span><span style="color:#a3be8c">&#34;script_value&#34;</span><span style="color:#eceff4">]</span> <span style="color:#81a1c1">!=</span> <span style="color:#a3be8c">&#34;output&#34;</span> <span style="color:#81a1c1;font-weight:bold">else</span> <span style="color:#b48ead">0</span><span style="color:#eceff4">)</span>
</span></span></code></pre></div><figure>
        <img loading="lazy" src="images/menu-callback.png"
             alt="Menu Callback"/> <figcaption>
                <p>Menu Callback</p>
            </figcaption>
    </figure>

</li>
</ol>
<figure>
  <video class="videoj" width="100%" autoplay loop muted playsinline src="images/demo-menu.mp4"></video>
  <figcaption><p></p></figcaption>
</figure>
<p>And that&rsquo;s it!</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://www.jamesrobinsonvfx.com">James Robinson üåä</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js" integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script>
const images = Array.from(document.querySelectorAll(".post-content img"));
images.forEach(img => {
  mediumZoom(img, {
    margin: 0,  
    scrollOffset: 40,  
    container: null,  
    template: null,  
    background: 'rgba(0, 0, 0, 0.8)'  
  });
});
</script>


<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
