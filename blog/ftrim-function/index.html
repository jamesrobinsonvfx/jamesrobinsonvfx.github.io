<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>ftrim() HScript function | James Robinson ğŸŒŠ</title><meta name=keywords content="houdini,tips,hscript"><meta name=description content="Trim unwanted digits from parameter values"><meta name=author content><link rel=canonical href=https://www.jamesrobinsonvfx.com/blog/ftrim-function/><link crossorigin=anonymous href=/assets/css/stylesheet.c18f0e70982d46e72f09a1b9c081ddb26b145e34778ccbb832592b0ab8dcbd67.css integrity="sha256-wY8OcJgtRucvCaG5wIHdsmsUXjR3jMu4MlkrCrjcvWc=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://www.jamesrobinsonvfx.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.jamesrobinsonvfx.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.jamesrobinsonvfx.com/favicon-32x32.png><link rel=apple-touch-icon href=https://www.jamesrobinsonvfx.com/apple-touch-icon.png><link rel=mask-icon href=https://www.jamesrobinsonvfx.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><link rel=icon href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸŒŠ</text></svg>"><meta property="og:title" content="ftrim() HScript function"><meta property="og:description" content="Trim unwanted digits from parameter values"><meta property="og:type" content="article"><meta property="og:url" content="https://www.jamesrobinsonvfx.com/blog/ftrim-function/"><meta property="og:image" content="https://www.jamesrobinsonvfx.com/blog/ftrim-function/images/preview.png"><meta property="article:section" content="blog"><meta property="article:published_time" content="2021-08-19T00:00:00+00:00"><meta property="article:modified_time" content="2021-08-19T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.jamesrobinsonvfx.com/blog/ftrim-function/images/preview.png"><meta name=twitter:title content="ftrim() HScript function"><meta name=twitter:description content="Trim unwanted digits from parameter values"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Blog ğŸª¶","item":"https://www.jamesrobinsonvfx.com/blog/"},{"@type":"ListItem","position":3,"name":"ftrim() HScript function","item":"https://www.jamesrobinsonvfx.com/blog/ftrim-function/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"ftrim() HScript function","name":"ftrim() HScript function","description":"Trim unwanted digits from parameter values","keywords":["houdini","tips","hscript"],"articleBody":" Hipfile: jamesr_ftrim.hip\nProblem Sometimes you want to reference the value of a parameter and display it as a string to put in a Font SOP, or the Viewport Comment of a Camera node when youâ€™re wedging sims or making some sort of visualizer.\nBut quite often, if youâ€™re referencing a float parameter, you wind up getting allllll the digits that come with it, full precision and all, rather than just the nice value you see in the interface.\nSuper long string of numbers when channel referencing\nie.\n0.04 becomes\n0.040000000000000001 which is probably not what you want!\nA possible solution to trim off some of the extra digits might look something like\nfloor(ch(\"/some/parm\") * 1000)/1000 Unfortunately, this fails too :(\nSolution The solution is actually quite simple! We can use the ftrim() function from HScript. ftrim() will strip off all those unwanted digits and leave you with a nice clean value, pretty much as you typed it!\nSome Parameter Value: `ftrim(ch(\"/some/parameter\"))` Using ftrim() to shore it up\nOf course, this also works in a Font SOP too.\nDemo on a Font SOP\nUpdate 9 Jan 2022 Hereâ€™s a handy snippet for programmatically wrapping channel references in ftrim(). Taken from the Linewriter tool.\n","wordCount":"202","inLanguage":"en","image":"https://www.jamesrobinsonvfx.com/blog/ftrim-function/images/preview.png","datePublished":"2021-08-19T00:00:00Z","dateModified":"2021-08-19T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.jamesrobinsonvfx.com/blog/ftrim-function/"},"publisher":{"@type":"Organization","name":"James Robinson ğŸŒŠ","logo":{"@type":"ImageObject","url":"https://www.jamesrobinsonvfx.com/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.jamesrobinsonvfx.com accesskey=h title="James Robinson ğŸŒŠ (Alt + H)">James Robinson ğŸŒŠ</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.jamesrobinsonvfx.com title="blog ğŸª¶"><span>blog ğŸª¶</span></a></li><li><a href=https://www.jamesrobinsonvfx.com/projects title="projects ğŸª›"><span>projects ğŸª›</span></a></li><li><a href=https://www.jamesrobinsonvfx.com/snippets title="snippets ğŸ§°"><span>snippets ğŸ§°</span></a></li><li><a href=https://www.jamesrobinsonvfx.com/links title="links ğŸ”—"><span>links ğŸ”—</span></a></li><li><a href=https://www.jamesrobinsonvfx.com/about title="about ğŸ‘‹"><span>about ğŸ‘‹</span></a></li><li><a href=https://www.jamesrobinsonvfx.com/search/ title="search ğŸ”"><span>search ğŸ”</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>ftrim() HScript function</h1><div class=post-meta><span title='2021-08-19 00:00:00 +0000 UTC'>August 19, 2021</span>&nbsp;Â·&nbsp;1 min</div></header><figure class=entry-cover><a href=https://www.jamesrobinsonvfx.com/blog/ftrim-function/images/preview.png target=_blank rel="noopener noreferrer"><img loading=lazy srcset="https://www.jamesrobinsonvfx.com/blog/ftrim-function/images/preview_hu038159cb704477b2d857b82351fe0d3c_376674_360x0_resize_box_3.png 360w ,https://www.jamesrobinsonvfx.com/blog/ftrim-function/images/preview_hu038159cb704477b2d857b82351fe0d3c_376674_480x0_resize_box_3.png 480w ,https://www.jamesrobinsonvfx.com/blog/ftrim-function/images/preview_hu038159cb704477b2d857b82351fe0d3c_376674_720x0_resize_box_3.png 720w ,https://www.jamesrobinsonvfx.com/blog/ftrim-function/images/preview.png 941w" sizes="(min-width: 768px) 720px, 100vw" src=https://www.jamesrobinsonvfx.com/blog/ftrim-function/images/preview.png alt="Cover Photo" width=941 height=660></a><p>Trim excess digits</p></figure><div class=post-content><blockquote><p>Hipfile: <a href=houdini/hip/jamesr_ftrim.hiplc>jamesr_ftrim.hip</a></p></blockquote><h2 id=problem>Problem<a hidden class=anchor aria-hidden=true href=#problem>ğŸ”—</a></h2><p>Sometimes you want to reference the value of a parameter and display it as a string to put in a Font SOP, or the Viewport Comment of a Camera node when you&rsquo;re wedging sims or making some sort of visualizer.</p><p>But quite often, if you&rsquo;re referencing a <code>float</code> parameter, you wind up getting allllll the digits that come with it, full precision and all, rather than just the nice value you see in the interface.</p><figure><img loading=lazy src=images/problem.png alt="Super long string of numbers when channel referencing"><figcaption><p>Super long string of numbers when channel referencing</p></figcaption></figure><p>ie.</p><pre tabindex=0><code>0.04
</code></pre><p>becomes</p><pre tabindex=0><code>0.040000000000000001
</code></pre><p>which is probably <em>not</em> what you want!</p><p>A possible solution to trim off some of the extra digits might look something like</p><pre tabindex=0><code>floor(ch(&#34;/some/parm&#34;) * 1000)/1000
</code></pre><p>Unfortunately, this fails too :(</p><h2 id=solution>Solution<a hidden class=anchor aria-hidden=true href=#solution>ğŸ”—</a></h2><p>The solution is actually quite simple! We can use the <code>ftrim()</code> function from HScript. <code>ftrim()</code> will strip off all those unwanted digits and leave you with a nice clean value, pretty much as you typed it!</p><pre tabindex=0><code>Some Parameter Value: `ftrim(ch(&#34;/some/parameter&#34;))`
</code></pre><figure><img loading=lazy src=images/solution.png alt="Using `ftrim()` to shore it up"><figcaption><p>Using <code>ftrim()</code> to shore it up</p></figcaption></figure><p>Of course, this also works in a <strong>Font SOP</strong> too.</p><figure><img loading=lazy src=images/font-sop.png alt="Demo on a Font SOP"><figcaption><p>Demo on a Font SOP</p></figcaption></figure><h2 id=update-9-jan-2022><em>Update 9 Jan 2022</em><a hidden class=anchor aria-hidden=true href=#update-9-jan-2022>ğŸ”—</a></h2><p>Here&rsquo;s a handy snippet for programmatically wrapping channel references in
<code>ftrim()</code>. Taken from the <a href=https://github.com/jamesrobinsonvfx/linewriter>Linewriter</a> tool.</p><script type=application/javascript src=https://gist.github.com/jamesrobinsonvfx/f17a0ec451428fbe71f9e58c1800225f.js></script></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.jamesrobinsonvfx.com/tags/houdini/>houdini</a></li><li><a href=https://www.jamesrobinsonvfx.com/tags/tips/>tips</a></li><li><a href=https://www.jamesrobinsonvfx.com/tags/hscript/>hscript</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://www.jamesrobinsonvfx.com>James Robinson ğŸŒŠ</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script>const images=Array.from(document.querySelectorAll(".post-content img"));images.forEach(e=>{mediumZoom(e,{margin:0,scrollOffset:40,container:null,template:null,background:"rgba(0, 0, 0, 0.8)"})})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>