<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Clip by Attribute Sop | James Robinson 🌊</title><meta name=keywords content="houdini,python,tools,viewer state"><meta name=description content="Clip primitives by a user-specified attribute"><meta name=author content><link rel=canonical href=https://www.jamesrobinsonvfx.com/projects/clip-by-attribute-sop/><link crossorigin=anonymous href=/assets/css/stylesheet.31a1ec8ce187fd44934e170601c332903bca9bc902e9bca2c4b7205cf7203d32.css integrity="sha256-MaHsjOGH/USTThcGAcMykDvKm8kC6byixLcgXPcgPTI=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://www.jamesrobinsonvfx.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.jamesrobinsonvfx.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.jamesrobinsonvfx.com/favicon-32x32.png><link rel=apple-touch-icon href=https://www.jamesrobinsonvfx.com/apple-touch-icon.png><link rel=mask-icon href=https://www.jamesrobinsonvfx.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><link rel=icon href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🌊</text></svg>"><meta property="og:title" content="Clip by Attribute Sop"><meta property="og:description" content="Clip primitives by a user-specified attribute"><meta property="og:type" content="article"><meta property="og:url" content="https://www.jamesrobinsonvfx.com/projects/clip-by-attribute-sop/"><meta property="og:image" content="https://www.jamesrobinsonvfx.com/projects/clip-by-attribute-sop/images/preview.png"><meta property="article:section" content="projects"><meta property="article:published_time" content="2023-02-06T00:00:00+00:00"><meta property="article:modified_time" content="2023-02-06T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.jamesrobinsonvfx.com/projects/clip-by-attribute-sop/images/preview.png"><meta name=twitter:title content="Clip by Attribute Sop"><meta name=twitter:description content="Clip primitives by a user-specified attribute"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Projects 🪛","item":"https://www.jamesrobinsonvfx.com/projects/"},{"@type":"ListItem","position":3,"name":"Clip by Attribute Sop","item":"https://www.jamesrobinsonvfx.com/projects/clip-by-attribute-sop/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Clip by Attribute Sop","name":"Clip by Attribute Sop","description":"Clip primitives by a user-specified attribute","keywords":["houdini","python","tools","viewer state"],"articleBody":" Get the HDA\nSample Hipfile\nView it on GitHub Overview This node uses the Clip SOP to cut primitives whose user-specified point attribute value is outside a certain threshold. It’s one of my favorite little tools, and I really wanted to explore creating Viewer States in Houdini. I’m by no means a Python Viewer State expert, so keep that in mind when you’re poking around the code ;)\nAdjusting clip threshold\nUsing the Blast Sop with a group expression is very similar, but since it deletes points/prims entirely, you usually wind up with a steppy, geometric edge.\nSince this node uses the Clip SOP instead, primitives can be cut more accurately and the result can be a bit nicer. Often pairs well with a Delta Mush\nBlast SOP. A bit jaggy.\nClip by Attribute. Much smoother!\nAll the code is embedded on the node itself (help docs, viewer state, etc) but I’ve also got a copy in the repo for easy diffing / reference.\nViewer State Features Viewer State Info Panel\nClick to sample clipping threshold from a mesh Use your mouse’s scroll wheel* to interactively fine-adjust the clipping threshold Clip by a component of a vector attribute Hotkeys to cycle vector components, reset clipping threshold, etc. Viewport Info Panel HUD Help Card Hit Enter in the viewport to enter the Viewer State and check out the Info Panel HUD for more info about how to use the viewer state features.\n*A little buggy with some mice at the moment, like my Logitech MX Master\nCredit to Charles Trippe for teaching me this cool method for clipping stuff!\n","wordCount":"268","inLanguage":"en","image":"https://www.jamesrobinsonvfx.com/projects/clip-by-attribute-sop/images/preview.png","datePublished":"2023-02-06T00:00:00Z","dateModified":"2023-02-06T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.jamesrobinsonvfx.com/projects/clip-by-attribute-sop/"},"publisher":{"@type":"Organization","name":"James Robinson 🌊","logo":{"@type":"ImageObject","url":"https://www.jamesrobinsonvfx.com/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.jamesrobinsonvfx.com accesskey=h title="James Robinson 🌊 (Alt + H)">James Robinson 🌊</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.jamesrobinsonvfx.com title="blog 🪶"><span>blog 🪶</span></a></li><li><a href=https://www.jamesrobinsonvfx.com/projects title="projects 🪛"><span>projects 🪛</span></a></li><li><a href=https://www.jamesrobinsonvfx.com/snippets title="snippets 🧰"><span>snippets 🧰</span></a></li><li><a href=https://www.jamesrobinsonvfx.com/links title="links 🔗"><span>links 🔗</span></a></li><li><a href=https://www.jamesrobinsonvfx.com/about title="about 👋"><span>about 👋</span></a></li><li><a href=https://www.jamesrobinsonvfx.com/search/ title="search 🔍"><span>search 🔍</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Clip by Attribute Sop</h1><div class=post-meta><span title='2023-02-06 00:00:00 +0000 UTC'>February 6, 2023</span>&nbsp;·&nbsp;2 min</div></header><figure class=entry-cover><a href=https://www.jamesrobinsonvfx.com/projects/clip-by-attribute-sop/images/preview.png target=_blank rel="noopener noreferrer"><img loading=lazy srcset="https://www.jamesrobinsonvfx.com/projects/clip-by-attribute-sop/images/preview_hu41dc87ac3387f5d694b64739937ceeca_3495828_360x0_resize_box_3.png 360w ,https://www.jamesrobinsonvfx.com/projects/clip-by-attribute-sop/images/preview_hu41dc87ac3387f5d694b64739937ceeca_3495828_480x0_resize_box_3.png 480w ,https://www.jamesrobinsonvfx.com/projects/clip-by-attribute-sop/images/preview_hu41dc87ac3387f5d694b64739937ceeca_3495828_720x0_resize_box_3.png 720w ,https://www.jamesrobinsonvfx.com/projects/clip-by-attribute-sop/images/preview_hu41dc87ac3387f5d694b64739937ceeca_3495828_1080x0_resize_box_3.png 1080w ,https://www.jamesrobinsonvfx.com/projects/clip-by-attribute-sop/images/preview_hu41dc87ac3387f5d694b64739937ceeca_3495828_1500x0_resize_box_3.png 1500w ,https://www.jamesrobinsonvfx.com/projects/clip-by-attribute-sop/images/preview.png 3322w" sizes="(min-width: 768px) 720px, 100vw" src=https://www.jamesrobinsonvfx.com/projects/clip-by-attribute-sop/images/preview.png alt="Cover Photo" width=3322 height=1654></a><p>Clip by Attribute</p></figure><div class=post-content><blockquote><p><a href=https://github.com/jamesrobinsonvfx/clipbyattrib/releases/latest/download/sop_clipbyattrib_1_0.hda>Get the HDA</a></p><p><a href=https://github.com/jamesrobinsonvfx/clipbyattrib/releases/latest/download/jamesr_clipbyattrib.hiplc>Sample Hipfile</a></p><div class=social-icons><a href=https://github.com/jamesrobinsonvfx/clipbyattrib>View it on GitHub<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></div></blockquote><h1 id=overview>Overview<a hidden class=anchor aria-hidden=true href=#overview>🔗</a></h1><style>.__h_video{position:relative;padding-bottom:56.23%;height:0;overflow:hidden;width:100%;background:#000}.__h_video img{width:100%;height:auto;color:#000}.__h_video .play{height:72px;width:72px;left:50%;top:50%;margin-left:-36px;margin-top:-36px;position:absolute;cursor:pointer}</style><div class="s_video_simple __h_video"><a href=https://vimeo.com/7.96517144e+08 rel=noopener target=_blank><img src=https://i.vimeocdn.com/video/1604992622-efe6aa7340dfb95c9f6bc908371c05fa3c53db38d1b23a40c7885bb3dd171d44-d_295x166 srcset="https://i.vimeocdn.com/video/1604992622-efe6aa7340dfb95c9f6bc908371c05fa3c53db38d1b23a40c7885bb3dd171d44-d_295x166 1x, https://i.vimeocdn.com/video/1604992622-efe6aa7340dfb95c9f6bc908371c05fa3c53db38d1b23a40c7885bb3dd171d44-d_295x166 2x" alt="Clip by Attribute"><div class=play><svg version="1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 61 61"><circle cx="30.5" cy="30.5" r="30.5" opacity=".8" fill="#000"/><path d="M25.3 19.2c-2.1-1.2-3.8-.2-3.8 2.2v18.1c0 2.4 1.7 3.4 3.8 2.2l16.6-9.1c2.1-1.2 2.1-3.2.0-4.4l-16.6-9z" fill="#fff"/></svg></div></a></div><p>This node uses the <strong>Clip SOP</strong> to cut primitives whose user-specified point attribute value is outside a certain threshold. It&rsquo;s one of my favorite little tools, and I really wanted to explore creating <a href=https://www.sidefx.com/docs/houdini/hom/python_states.html>Viewer States</a> in Houdini. I&rsquo;m by <em><strong>no means</strong></em> a Python Viewer State expert, so keep that in mind when you&rsquo;re poking around the code ;)</p><figure><video class=videoj width=100% autoplay loop muted playsinline src=images/adjust-clip-threshold-5x.mp4></video><figcaption><p>Adjusting clip threshold</p></figcaption></figure><hr><p>Using the <strong>Blast Sop</strong> with a group expression is very similar, but since it deletes points/prims entirely, you usually wind up with a steppy, geometric edge.</p><p>Since this node uses the <strong>Clip SOP</strong> instead, primitives can be cut more accurately and the result can be a bit nicer. Often pairs well with a <strong>Delta Mush</strong></p><figure><img loading=lazy src=images/compare-blast.png alt="Blast SOP. A bit jaggy."><figcaption><p>Blast SOP. A bit jaggy.</p></figcaption></figure><figure><img loading=lazy src=images/compare-clipbyattrib.png alt="Clip by Attribute. Much smoother!"><figcaption><p>Clip by Attribute. Much smoother!</p></figcaption></figure><hr><p>All the code is embedded on the node itself (help docs, viewer state, etc) but I&rsquo;ve also got a copy in the repo for easy diffing / reference.</p><h1 id=viewer-state-features>Viewer State Features<a hidden class=anchor aria-hidden=true href=#viewer-state-features>🔗</a></h1><figure><img loading=lazy src=images/viewer-state-info-panel.png alt="Viewer State Info Panel"><figcaption><p>Viewer State Info Panel</p></figcaption></figure><ul><li>Click to sample clipping threshold from a mesh</li><li>Use your mouse&rsquo;s scroll wheel* to interactively fine-adjust the clipping threshold</li><li>Clip by a component of a vector attribute</li><li>Hotkeys to cycle vector components, reset clipping threshold, etc.</li><li>Viewport Info Panel HUD</li><li>Help Card</li></ul><p>Hit <strong>Enter</strong> in the viewport to enter the <a href=https://www.sidefx.com/docs/houdini/hom/python_states.html>Viewer State</a> and check out the <strong>Info Panel HUD</strong> for more info about how to use the viewer state features.</p><blockquote><p>*A little buggy with some mice at the moment, like my Logitech MX Master</p></blockquote><hr><p>Credit to <a href=http://vimeo.com/charlestrippe>Charles Trippe</a> for teaching me this cool method for clipping stuff!</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.jamesrobinsonvfx.com/tags/houdini/>houdini</a></li><li><a href=https://www.jamesrobinsonvfx.com/tags/python/>python</a></li><li><a href=https://www.jamesrobinsonvfx.com/tags/tools/>tools</a></li><li><a href=https://www.jamesrobinsonvfx.com/tags/viewer-state/>viewer state</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://www.jamesrobinsonvfx.com>James Robinson 🌊</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script>const images=Array.from(document.querySelectorAll(".post-content img"));images.forEach(e=>{mediumZoom(e,{margin:0,scrollOffset:40,container:null,template:null,background:"rgba(0, 0, 0, 0.8)"})})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>